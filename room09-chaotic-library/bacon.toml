default_job = "run-long"
env.CARGO_TERM_COLOR = "always"

# Run your long-running application (eg server) and have the result displayed in bacon.
# For programs that never stop (eg a server), `background` is set to false
# to have the cargo run output immediately displayed instead of waiting for
# program's end.
# 'on_change_strategy' is set to `kill_then_restart` to have your program restart
# on every change (an alternative would be to use the 'F5' key manually in bacon).
# If you often use this job, it makes sense to override the 'r' key by adding
# a binding `r = job:run-long` at the end of this file .
[jobs.run-long]
command = ["cargo", "run", "--target-dir", "target/bacon", "--", "start"]
watch = ["Cargo.toml", "src", "assets", "contents"]
need_stdout = true
allow_warnings = true
background = false
on_change_strategy = "kill_then_restart"

[jobs.watch-scss]
command = ["pnpm", "run", "build"]
watch = ["assets/views", "assets/styles"]
need_stdout = true
allow_warnings = true
background = false
on_change_strategy = "wait_then_restart"

# You may define here keybindings that would be specific to
# a project, for example a shortcut to launch a specific job.
# Shortcuts to internal functions (scrolling, toggling, etc.)
# should go in your personal global prefs.toml file instead.
[keybindings]
c = "job:clippy-all" # comment this to have 'c' run clippy on only the default target
s = "job:watch-scss"
